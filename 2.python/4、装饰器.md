### 原始装饰器

```python
def add(a, b):
    return a + b

def add_new(func, *args, **kwargs):
    return f'<{func(*args, **kwargs)}>'	# 在原有的函数上增添功能
```

### 基本使用

```python
# 为test函数增添字体倾斜功能
def test_out(func):
    def test_inner():
        return f'<i>{func()}<i>'
    return test_inner

@test_out # 语法糖，直接调用test()等价于test_out(test)()
def test():
    return 'hello world!'
```

### 装饰器格式

```python
# 装饰器就是一个函数
def 装饰器名(func):
    def warpper(*args, **kwargs):
        # 要做的装饰，此处若干代码
        return func(*args, **kwargs)
    return warpper
```

#### 类的装饰器

```python
# 用来装饰类，格式如下
def 装饰器名(cls):
    # 装饰器代码
    return cls

# 实例
def add_name(cls):	# 为类增加属性
    cls.name = '小明'
    return cls

@add_name
class B(object):
    pass
```

#### 装饰器类

```python
# 装饰器不是函数，而是一个类
class 装饰器名(object):
    def __init__(self, func):
        pass
    def __call__(self, *args, **kwargs):	# 函数调用的使用会自动执行
        # 装饰器代码
        return self.func
    
# 实例
class A(object):
    def __init__(self, func):
        self.func = func

    def __call__(self, *args, **kwargs):
        print('__call__被执行了')
        return self.func(*args, **kwargs)
    
@A
def test(a, b):
    return a + b
```

#### 带参数的装饰器

```python
# 采用函数嵌套方法
def log(filename:str):	# 装饰器参数
    def inner(func):	# 接收被装饰的函数
        def wrapper(*args, **kwargs):	# 接收被装饰的函数的参数
            # 装饰器代码
            return func(*args, **kwargs)
    	return wrapper
    return inner
```

